<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheet/user/address.css">
    <link rel="stylesheet" href="https://allyoucan.cloud/cdn/icofont/1.0.1/icofont.css" integrity="sha384-jbCTJB16Q17718YM9U22iJkhuGbS0Gd2LjaWb4YJEZToOPmnKDjySVa323U+W7Fv" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/197a2eac2f.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- <link
    href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
    rel="stylesheet"
  />  
   -->

  

  

  
<div class="container">
    <div class="row">
        <div class="col-md-3">
            <div class="osahan-account-page-left shadow-sm bg-white h-100">
               
                <ul class="nav nav-tabs flex-column border-0 pt-4 pl-4 pb-4" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link" id="addresses-tab" data-toggle="tab" href="#addresses" role="tab" aria-controls="addresses" aria-selected="false"></i> Addresses</a>
                    </li>
                    <br>
                    <li class="nav-item">
                    
                      <button type="button" class="btn btn-light mt-2 ml-4 font-weight-bold" data-toggle="modal" data-target="#addAddressModal">Add Address</button>

                  </li>
                </ul>
            </div>
        </div>
        <div class="col-md-9">
            <div class="osahan-account-page-right shadow-sm bg-white p-4 h-100">
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade  active show" id="addresses" role="tabpanel" aria-labelledby="addresses-tab">
                        <h4 class="font-weight-bold mt-0 mb-4">Manage Addresses</h4>
                        <div class="row">
                            <% user.addresses.forEach((address, index) => { %>                              <div class="col-md-6">
                                  <div class="bg-white card addresses-item mb-4 shadow-sm">
                                      <div class="gold-members p-4">
                                          <div class="media">
                                              <div class="mr-3"><i class="icofont-briefcase icofont-3x"></i></div>
                                              <div class="media-body">

                                                



                                                  <h6 class="mb-1"><%= address.addressType %></h6>
                                                  <p> <%= address.country %>, <%= address.mobileNumber %>, <%= address.pincode %>, <%= address.flat %>, <%= address.district %>, <%= address.state %></p>
                                                  <p class="mb-0 text-black font-weight-bold">
                                                    <div class="button-group">
                                                      <!-- Edit button -->
                                                      <a href="/Editaddress/<%= address._id %>">
                                                      <button class="btn btn-primary mr-3" onclick="showEditModal()">
                                                        <i class="icofont-ui-edit"></i> Edit
                                                    </button></a>
                                                    
                                                    
                                                      <!-- Delete button -->
                                                      <form id="deleteForm<%= index %>" method="POST" action="/delete/<%= address._id %>" class="delete-form">
                                                          <button type="button" onclick="openModal('<%= index %>')" class="btn btn-danger">Delete</button>
                                                      </form>
                                                  </div>
                                                  </p>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          <% }); %>
                      </div>
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="confirmationModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <p>Are you sure you want to delete this product?</p>
    <button id="confirmDeleteButton" class="confirm-btn">Confirm</button>
  </div>
</div>

<!-- modal 1 add address -->
<div class="modal fade" id="addAddressModal" tabindex="-1" role="dialog" aria-labelledby="addAddressModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addAddressModalLabel">Add Address</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- Form for adding address -->
        <form action="/Address" method="POST">
          <!-- <div class="form-group">
            <label for="address1">Address </label>
            <input type="text" class="form-control" name="address1" id="address1" required>
          </div> -->

          <div class="form-group" id="addressType">
            <label for="landmark">Address type</label>
            <select name="addressType"> 
                <option value="home">Home</option>
                <option value="work">Work</option>
            </select>
          <div class="form-group">
            <label for="country">Country/Region</label>
            <input type="text" class="form-control" name="country" id="country" required>
          </div>
          <div class="form-group">
            <label for="mobileNumber">Mobile number</label>
            <input type="number" class="form-control" name="mobileNumber" id="mobileNumber" required>
          </div>
          <div class="form-group">
            <label for="pincode">Pincode (6 digits [0-9])</label>
            <input type="text" class="form-control" name="pincode" id="pincode" required>
          </div>
          <div class="form-group">
            <label for="flat">Flat, House no., Building, Company, Apartment</label>
            <input type="text" class="form-control" name="flat" id="flat" required>
          </div>
          <div class="form-group">
          <label for="area">district</label>
                        <input type="text" id="district" class="form-control" name="district" required />
                    </div>   
                    <div class="form-group">
                        <label for="state">State</label>
                        <input type="text" id="state"  class="form-control" name="state" required />
                    </div>

      
          <button type="submit" class="btn btn-primary">Save Address</button>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Modal edit address -->




<!-- modal delete -->
<script>
  function openModal(index) {
    document.getElementById('confirmationModal').style.display = 'block';
    // Pass the index to the confirmDelete function
    document.getElementById('confirmDeleteButton').onclick = function () {
      confirmDelete(index);
    };
  }

  function closeModal() {
    document.getElementById('confirmationModal').style.display = 'none';
  }

  function confirmDelete(index) {
    // Get the form dynamically using the index
    document.getElementById('deleteForm' + index).submit();
  }
</script>








<!-- modal 2 edit adress  -->

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>

</body>
</html>